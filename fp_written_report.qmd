---
title: "SDS 220 Final Project - Written Report"
author: "Evelyn Dinh & Sophie Biderman"
format: pdf
editor: source
bibliography: citation.bib
csl: apa.csl
---

# Does Sleep Duration Influences Productivity Level of College Students?

```{r}
#| include: false
#| echo: false
#| message: false
#| warning: false

library(tidyverse)
library(janitor)
library(readr)
library(knitr)
library(openintro)
library(infer)

sleep_productivity_stress <- read_csv("sleep_productivity_stress.csv") |>
  clean_names() |>
  rename("early_bird_or_night_owl" = "are_you_more_of_an_early_bird_or_a_night_owl",
         "weekday_sleep_average" = "how_long_do_you_sleep_during_weekdays_on_average" ,
         "weekday_productivity_level" = "how_productive_are_you_during_weekdays_on_average_rate_your_productivity_on_the_following_scales_1_not_productive_2_4_somewhat_productive_5_very_productive",
         "weekday_stress_level" = "on_average_how_stressed_do_you_feel_during_weekdays_rate_your_stress_on_the_following_scales_1_not_stressed_2_4_somewhat_stressed_5_very_stressed")
  
sleep_productivity <- sleep_productivity_stress |>  
  select(weekday_sleep_average,
         weekday_productivity_level)
```

## Introduction

Imagine waking up after few hours of sleep, then dragging your tired body through hours of coursework, assignments, and even exams! Now imagine doing that mostly everyday, in a duration of months? According to @averagesleepduration and @recommendedsleep, most college students only get 6-6.9 hours of sleep per day on average while the recommended amount for college students is 7-9 hours. Even though it is understandable that there are certain deadlines, exams, or just work generally that seems to be more important than few extra hours of sleep, this constant trade-off may lead to unexpected consequences to both their physical and mental health.

This project aims to investigate the relationship between sleep duration and one of the most crucial aspects of any college student's life: their productivity. Our research question is **"Does the amount of sleep a college student gets influence their productivity level?"**. As college students ourselves, our goal is to discover possible patterns of college students' sleep duration and whether it significantly accounts for our academic and work productivity throughout the week. Understanding such connection, we can devise our own solutions to improve our college life inside-out, both academically and personally.

The data for this study was collected through a survey on Google Form. Our target population is college students, and our sample included students from different colleges. We mainly used a convenience sampling method, gathering many of our survey responses from our friends and acquaintances who are college students. We are investigating whether the amount of sleep a college student gets influence their productivity using Two-Way Table Test of Independence with Chi-square Distribution.

## Exploratory Data Analysis

### Main Sample Questions

1.  **How long do you sleep during weekdays, on average?**

a.  Less than 5 hours
b.  5-7 hours
c.  More than 7 hours

2.  **How productive are you during weekdays, on average?** *Rate your productivity on the following scales: 1 - not productive, 2-4 - somewhat productive, 5 - very productive*

a.  Not productive
b.  Somewhat productive
c.  Very productive

### About the Data

#### Data Collection

Our target population is college students. 
This data is collected through Google Form. We used convenience sampling with responses from our friends and their acquaintances from Smith College, UMASS Amherst, Amherst College, Brown University, MIT...(USA), National Economic University, Diplomatic Academy of Vietnam, Hanoi University of Science and Technology... (Vietnam). Since we did not request input regarding school name, we do not know the exact number of observations from each school.
Other than directly sending to our friends at Smith, we posted it on Smith Confession to seek certain diversity and independence in Smithies observations. Evelyn also had her Vietnamese friends posted it on Meta posts and stories to seek responses from their network of Vietnamese college students; her other friends in other USA colleges also requested their acquaintances to fill out the survey, which helps widen the scope of the survey observation to students from other colleges.

#### Dataset Introduction

-   Number of observations: 90
-   Number of variables: 6 in total, 2 in use
    -   `weekday_sleep_average` (hours)
    -   `weekday_productivity_level`
-   Type of Variables: Categorical and Ordinal

#### Data Wrangling

Since we used multiple choice and check-boxes for most of our questions, we do not have to re-code the variables for consistency. Our questions regarding sleep duration, productivity, and stress level are also required, so we don't have any missing values in our data sets. However, since the variables are first named by the questions with space and capitalization, we have to clean the names and rename them to make sure they are concise and effective. We created 1 subset of the data set - sleep and productivity level with 2 variables regarding sleep duration and productivity level.

#### Variable Distribution

##### Weekday Sleep Duration

```{r}
#| label: fig-sleep
#| fig-cap: "Weekday Sleep Duration of College Students"
#| echo: false
#| message: false
#| warning: false

sleep_productivity_stress <- sleep_productivity_stress |>
  mutate(weekday_sleep_average = fct_relevel(weekday_sleep_average, 
            "Less than 5 hours", "5-7 hours", "More than 7 hours")) 

sleep_productivity_stress |>
  ggplot(aes(x = weekday_sleep_average,
             fill = weekday_sleep_average)) +
  geom_bar() +
  labs(
    title = "Weekday Sleep Duration of College Students",
    subtitle = "A Survey of Sleep Duration of College Students",
    caption = "Source: Self-Collected Survey",
    x = "Weekday Sleep Duration",
    y = "Count",
    fill = "Weekday Sleep Duration"
  )
```

From @fig-sleep, it is noticeable that nearly half of observations, 44 out of 90 observations, sleep for 5-7 hours on average during weekdays. About 26 observations sleep for more than 7 hours on average during weekdays, while only 20 observations sleep for less than 5 hours on average during weekdays.

##### Weekday Productivity Level

```{r}
#| label: fig-productivity
#| fig-cap: "Weekday Productivity Level of College Students"
#| echo: false
#| message: false
#| warning: false

sleep_productivity_stress |>
  ggplot(aes(x = weekday_productivity_level,
             fill = weekday_productivity_level)) +
  geom_bar() +
  theme(
    axis.text = element_text(size = 7.5)
  ) +
  labs(
    title = "Weekday Productivity Level of College Students",
    subtitle = "A Survey of Productivity of College Students",
    caption = "Source: Self-Collected Survey",
    x = "Weekday Productivity Level",
    y = "Count",
    fill = "Weekday Productivity Level"
  )
```

From @fig-productivity, it can be seen that the majority, 47 out of 90, of observed college students feel somewhat productive on average during weekday. Nearly $1/3$ of the observations feel very productive on average during weekday while only 15 out of 90 observations do not feel productive on average during weekday.

### Sleep Duration vs. Productivity Level

Since `weekday_sleep_average` and `weekday_productivity_level` are both **categorical variables**, we are using a **contingency table** as well as **stacked bar plot** to visualize their distribution and potential association.

```{r}
#| label: tbl-sleep-productivity
#| tbl-cap: "Sleep Duration vs. Productivity Level Observed Values"
#| echo: false
#| message: false
#| warning: false

sleep_productivity <- table(sleep_productivity)
kable(sleep_productivity)
```
 
```{r}
#| label: fig-sleep-productivity
#| fig-cap: "Sleep Duration vs. Productivity Level of College Students"
#| echo: false
#| message: false
#| warning: false

sleep_productivity_stress |>
  ggplot(aes(x = weekday_productivity_level,
             fill = weekday_sleep_average)) +
  geom_bar() +
  theme(
    axis.text = element_text(size = 7.5)
  ) +
  labs(
    title = "Sleep Duration vs. Productivity Level",
    subtitle = "A Survey of Sleep Duration vs. Productivity Level of College Students",
    caption = "Source: Self-Collected Survey",
    x = "Weekday Productivity Level",
    y = "Count",
    fill = "Weekday Sleep Duration"
  )
```

@tbl-sleep-productivity and the corresponding @fig-sleep-productivity shows the distribution of the observed values of productivity levels across different sleep duration.

## Results

#### Type of Test

Since `weekday_sleep_average` and `weekday_productivity_level` are both **categorical variables** with each of them have 3 categories, we use inference of two-way tables. Therefore we are using the **Two-Way Table Test of Independence** with **Chi-square Distribution** through the **Mathematical Model**.

#### Hypotheses

-   $H_0$: Sleep duration and productivity level are independent.
-   $H_A$: Sleep duration and productivity level are related.

#### Conditions

The Conditions for Two-Way Table Test of Independence include **Independence** and **Large Sample**.

1.  **Independence**: The data values were collected were from a random sample.

The use of convenience sampling method may introduce certain dependence among observations. For example, students from the same social circles or colleges may share common traits, behaviors, or habits.
Thus, Independence condition for Two-Way Table Test of Independence not met.

2.  **Large Sample**: $e_{i,j} \geq 5$ for each cell.

If `weekday_sleep_average` and `weekday_productivity_level` are truly independent under the null hypothesis $H_0$ of independence, our expected count values for all cells would be 

```{r}
#| label: tbl-sleep-productivity-expected
#| tbl-cap: "Sleep Duration vs. Productivity Level Expected Counts"
#| echo: false
#| message: false
#| warning: false

chi_square_test <- chisq.test(sleep_productivity)
expected_counts <- chi_square_test$expected
kable(round(expected_counts, 2))
```

There are 2 expected counts that do not meet the criteria of $e_{i,j} \geq 5$ - $e_{2,1}$ and $e_{3,1}$ - as shown in @tbl-sleep-productivity-expected.
Thus, Large Sample condition for Two-Way Table Test of Independence not met.

**Note**: Because of both conditions not met, the test statistics $\chi^2$ may not have a Chi-squared Distribution.

#### Chi-Square Testing

##### Test Statistics

```{r}
#| echo: false
#| message: false
#| warning: false

print(chi_square_test)
```

Assuming that conditions for the Mathematical Model of the Two-Way Table Test of Independence are met and $H_0$ is true, our test statistic 

$\chi^2 = 14.223$, 

which is a ratio of how the observed counts vary from the expected counts as compared to the expected counts, has a **Chi-squared Distribution** with the parameter

$df = (R-1)(C-1) = (3-1)(3-1) = 4$,

called **degrees of freedom**, which changes the shape of the Chi-squared distribution - the higher the degrees of freedom, the less skewed, more symmetric, more spread the distribution will be, and the further will the peak shift rightward. 

##### p-value Mathematical Model Plot

```{r}
#| echo: false
#| message: false
#| warning: false

test_stat <- 14.223
curve(dchisq(x, df = 4), col = 'black',  from = 0,to = 25, 
      xlab = "", ylab = "", xaxt = "n",  yaxt = "n")
xvec <- seq(test_stat, 25, length = 101)
pvec <- dchisq(xvec, df = 4)
polygon(c(xvec, rev(xvec)), c(pvec, rep(0, length(pvec))),
        col = adjustcolor("red", alpha = 0.3))
abline(v = test_stat, col = "red", lwd = 2)
```

Our null distribution (as shown above) is a **Chi-square Distribution** which is always right-skewed, only haves positive values, and has a parameter of $df = 4$.

Given that we only take the shaded right tail area to calculate p-value, our $p-value = .006615$.

We choose our significance level $\alpha = .01$ to control the Type 1 error rate.

##### Conclusion

Our $p-value = .006615$ is smaller than $\alpha = .01$, therefore we reject the null hypothesis. We conclude that sleep duration and productivity level are significantly related.

##### Interpretation

The data provides sufficient evidence to support the claim that sleep duration is significantly related to productivity level at $\alpha = .01$ significance level. Therefore, it is reasonable to believe that the amount of sleep a college student gets influence their productivity level.

## Discussion

## Appendix

## Bibliography
