---
title: "SDS 220 Final Project - Written Report"
author: "Evelyn Dinh & Sophie Biderman"
format: pdf
editor: source
bibliography: citation.bib
csl: apa.csl
---

# Does Sleep Duration Influence Productivity Level of College Students?

```{r}
#| include: false
#| echo: false
#| message: false
#| warning: false

library(tidyverse)
library(janitor)
library(readr)
library(knitr)
library(openintro)
library(infer)

sleep_productivity_stress <- read_csv("sleep_productivity_stress.csv") |>
  clean_names() |>
  rename("early_bird_or_night_owl" = "are_you_more_of_an_early_bird_or_a_night_owl",
         "weekday_sleep_average" = "how_long_do_you_sleep_during_weekdays_on_average" ,
         "weekday_productivity_level" = "how_productive_are_you_during_weekdays_on_average_rate_your_productivity_on_the_following_scales_1_not_productive_2_4_somewhat_productive_5_very_productive",
         "weekday_stress_level" = "on_average_how_stressed_do_you_feel_during_weekdays_rate_your_stress_on_the_following_scales_1_not_stressed_2_4_somewhat_stressed_5_very_stressed")
  
sleep_productivity <- sleep_productivity_stress |>  
  select(weekday_sleep_average,
         weekday_productivity_level)
```

## Introduction

Imagine waking up after only a few hours of sleep, then dragging your tired body through hours of coursework, assignments, and even exams! Now imagine doing that mostly everyday, for a duration of months? According to @averagesleepduration and @recommendedsleep, most college students only get 6-6.9 hours of sleep per day on average while the recommended amount for college students is 7-9 hours. Even though it is understandable that there are certain deadlines, exams, or just work generally that seems to be more important than few extra hours of sleep, this constant trade-off may lead to unexpected consequences to both their physical and mental health.

This project aims to investigate the relationship between sleep duration and one of the most crucial aspects of any college student's life: their productivity. Our research question is **"Does the amount of sleep a college student gets influence their productivity level?"**. As college students ourselves, our goal is to discover possible patterns of college students' sleep duration and whether it significantly accounts for our academic and work productivity throughout the week. Through understanding such connection, we can devise our own solutions to improve our college life inside-out, both academically and personally.

The data for this study was collected through a survey on Google Form. Our target population is college students, and our sample included students from different colleges such as Smith College, Amherst College, UMASS Amherst, etc. We mainly used a convenience sampling method, gathering many of our survey responses from our friends and acquaintances who are college students. We are investigating whether the amount of sleep a college student gets influence their productivity using **Two-Way Table Test of Independence** with **Chi-square Distribution**.

## Exploratory Data Analysis

### Main Sample Questions

1.  **How long do you sleep during weekdays, on average?**

a.  Less than 5 hours
b.  5-7 hours
c.  More than 7 hours

2.  **How productive are you during weekdays, on average?** *Rate your productivity on the following scales: 1 - not productive, 2-4 - somewhat productive, 5 - very productive*

a.  Not productive
b.  Somewhat productive
c.  Very productive

### About the Data

#### Data Collection

Our target population is college students. 

This data is collected through Google Form. We used convenience sampling with responses from our friends and their acquaintances from Smith College, UMASS Amherst, Amherst College, Brown University, MIT...(USA), National Economic University, Diplomatic Academy of Vietnam, Hanoi University of Science and Technology... (Vietnam). Since we did not request input regarding school name, we do not know the exact number of observations from each school.

Other than directly sending to our friends at Smith, we posted it on Smith Confession to seek certain diversity and independence in Smithies observations. Evelyn also had her Vietnamese friends posted it on Meta posts and stories to seek responses from their network of Vietnamese college students; her other friends in other USA colleges also requested their acquaintances to fill out the survey, which helps widen the scope of the survey observation to students from other colleges.

#### Dataset Introduction

We collected **90 responses** i.e. observations through our survey for **6 variables** in total, including major division, class year, whether the respondent is an early bird or a night owl, their average amount of sleep during weekday in hours, their average productivity level during weekday.

We use **2 variables** - their average amount of sleep during weekday in hours and their average productivity level during weekday. Specifically, we consider the weekday average amount of sleep to be our **explanatory variable** and the weekday average productivity level to be our **response variable**. Both variables are **ordinal** and **categorical**. 

#### Data Wrangling

Since we used multiple choice and check-boxes for most of our questions, we do not have to re-code the variables for consistency. Our questions regarding sleep duration, productivity, and stress level are also required, so we don't have any missing values in our data sets. However, since the variables are first named by the questions with space and capitalization, we have to clean the names and rename them to make sure they are concise and effective. We created 1 subset of the data set - sleep and productivity level with 2 variables regarding sleep duration and productivity level.

#### Variable Distribution

##### Weekday Sleep Duration

```{r}
#| label: fig-sleep
#| fig-cap: "Weekday Sleep Duration of College Students"
#| echo: false
#| message: false
#| warning: false

sleep_productivity_stress <- sleep_productivity_stress |>
  mutate(weekday_sleep_average = fct_relevel(weekday_sleep_average, 
            "Less than 5 hours", "5-7 hours", "More than 7 hours")) 

sleep_productivity_stress |>
  ggplot(aes(x = weekday_sleep_average,
             fill = weekday_sleep_average)) +
  geom_bar() +
  labs(
    title = "Weekday Sleep Duration",
    caption = "Source: Self-Collected Survey",
    x = "Weekday Sleep Duration",
    y = "Count",
    fill = "Weekday Sleep Duration"
  )
```

From @fig-sleep, it is noticeable that nearly half of the observed college students, 44 out of 90 observations, sleep for 5-7 hours on average during weekdays. About 26 observations sleep for more than 7 hours on average during weekdays, while only 20 observations sleep for less than 5 hours on average during weekdays.

##### Weekday Productivity Level

```{r}
#| label: fig-productivity
#| fig-cap: "Weekday Productivity Level of College Students"
#| echo: false
#| message: false
#| warning: false

sleep_productivity_stress |>
  ggplot(aes(x = weekday_productivity_level,
             fill = weekday_productivity_level)) +
  geom_bar() +
  theme(
    axis.text = element_text(size = 7.5)
  ) +
  labs(
    title = "Weekday Productivity Level",
    caption = "Source: Self-Collected Survey",
    x = "Weekday Productivity Level",
    y = "Count",
    fill = "Weekday Productivity Level"
  )
```

From @fig-productivity, it can be seen that the majority, 47 out of 90, of observed college students feel somewhat productive on average during weekday. Nearly $1/3$ of the observations feel very productive on average during weekday while only 15 out of 90 observations do not feel productive on average during weekday.

### Sleep Duration vs. Productivity Level

Since college students' weekday average sleep duration and their weekday average productivity level are both **categorical variables**, we are using a **contingency table** as well as **stacked bar plot** to visualize their distribution and potential association.

```{r}
#| label: tbl-sleep-productivity
#| tbl-cap: "Sleep Duration vs. Productivity Level of College Students"
#| echo: false
#| message: false
#| warning: false

sleep_productivity <- sleep_productivity |>
  mutate(weekday_sleep_average = fct_relevel(weekday_sleep_average, 
            "Less than 5 hours", "5-7 hours", "More than 7 hours"))

sleep_productivity <- table(sleep_productivity)
kable(sleep_productivity)
```
 
```{r}
#| label: fig-sleep-productivity
#| fig-cap: "Sleep Duration vs. Productivity Level of College Students"
#| echo: false
#| message: false
#| warning: false

sleep_productivity_stress |>
  ggplot(aes(x = weekday_productivity_level,
             fill = weekday_sleep_average)) +
  geom_bar() +
  theme(
    axis.text = element_text(size = 7.5)
  ) +
  labs(
    title = "Sleep Duration vs. Productivity Level",
    caption = "Source: Self-Collected Survey",
    x = "Weekday Productivity Level",
    y = "Count",
    fill = "Weekday Sleep Duration"
  )
```

@tbl-sleep-productivity and the corresponding @fig-sleep-productivity shows the distribution of the observed values of productivity levels across different sleep duration. 

It is noticeable that college students who sleep 5-7 hours make up the majority of "somewhat productive" group with 29 students while those who sleep less than 5 hours have the highest number of individuals in the "very productive" group with 12 students For both the "not productive" and "very productive" group, the number of college students sleeping 5-7 hours and more than 7 hours is the same. Surprisingly, in the "not productive" category, 7 students each reported sleeping 5-7 hours and more than 7 hours, both are significantly higher than the number of students sleeping less than 5 hours, which was only 1.

## Results

#### Type of Test

Since college students' weekday average sleep duration and their weekday average productivity level are both **categorical variables** with each of them have 3 categories, we use inference of two-way tables. Therefore we are using the **Two-Way Table Test of Independence** with **Chi-square Distribution** through the **Mathematical Model**.

#### Hypotheses

Our null hypothesis $H_0$ is that college students' sleep duration and productivity level are independent. Our alternative hypothesis is that college students' sleep duration and productivity level are dependent.

#### Conditions

The Conditions for Two-Way Table Test of Independence include **Independence**, in which the data values were collected were from a random sample, and **Large Sample**, in which $e_{i,j} \geq 5$ for each cell.

For the **Independence** condition, the use of convenience sampling method may introduce certain dependence among observations. For example, students from the same social circles or colleges may share common traits, behaviors, or habits. Thus, Independence condition for Two-Way Table Test of Independence is not met.

If college students' weekday average sleep duration and their weekday average productivity level are truly independent under the null hypothesis $H_0$ of independence, our expected count values for all cells would be as following.

```{r}
#| label: tbl-sleep-productivity-expected
#| tbl-cap: "Sleep Duration vs. Productivity Level of College Students Expected Counts"
#| echo: false
#| message: false
#| warning: false

chi_square_test <- chisq.test(sleep_productivity)
expected_counts <- chi_square_test$expected
kable(round(expected_counts, 2))
```

For the **Large Sample** condition, there are 2 expected counts that do not meet the criteria of $e_{i,j} \geq 5$ - $e_{2,1}$ and $e_{3,1}$ - as shown in @tbl-sleep-productivity-expected. Thus, Large Sample condition for Two-Way Table Test of Independence not met.

**Note**: Because of both conditions not met, the test statistics $\chi^2$ may not have a Chi-squared Distribution. However, we will still run the Two-Way Table Inference of Independence.

#### Chi-Square Testing

##### Test Statistics

```{r}
#| echo: false
#| message: false
#| warning: false
#| include: false

print(chi_square_test)
```

Assuming that conditions for the Mathematical Model of the Two-Way Table Test of Independence are met and $H_0$ is true, our test statistic $\chi^2 = 14.223$, which is a ratio of how the observed counts vary from the expected counts as compared to the expected counts, has a **Chi-squared Distribution** with the parameter **degrees of freedom** having the value of $df = (R-1)(C-1) = (3-1)(3-1) = 4$ in which R represents the number of rows and C represents the number of columns. 

##### p-value Mathematical Model Plot

```{r}
#| label: fig-chi-square
#| fig-cap: "Chi-square Distribution of df = 4 and p-value (shaded right-tail area)"
#| echo: false
#| message: false
#| warning: false

test_stat <- 14.223
curve(dchisq(x, df = 4), col = 'black',  from = 0,to = 25, 
      xlab = "", ylab = "", xaxt = "n",  yaxt = "n")
xvec <- seq(test_stat, 25, length = 101)
pvec <- dchisq(xvec, df = 4)
polygon(c(xvec, rev(xvec)), c(pvec, rep(0, length(pvec))),
        col = adjustcolor("red", alpha = 0.3))
abline(v = test_stat, col = "red", lwd = 2)
```

Our null distribution, as shown in @fig-chi-square, is a **Chi-square Distribution** which is always right-skewed, only has positive values, and has a parameter of $df = 4$. The degree of freedom changes the shape of the Chi-squared distribution in which the higher the degrees of freedom, the less skewed, more symmetric, more spread the distribution will be, and the further will the peak shift rightward.

Given that we only take the shaded right tail area to calculate our p-value, our $p-value = .006615$. This means that the probability that we observe our $\chi^2$ as large as $14.223$ or larger is $.006615$.

We choose our significance level $\alpha = .01$ to control the Type 1 error rate in which we concluded that college students' sleep duration and productivity level are dependent when they are in fact independent.

##### Conclusion & Interpretation

Our $p-value = .006615$ is smaller than $\alpha = .01$, therefore we reject the null hypothesis. We conclude that college students' sleep duration and productivity level are significantly related. The data provides statistically significant evidence to support the claim that sleep duration is significantly related to productivity level at $\alpha = .01$ significance level. Therefore, it is reasonable to believe that the amount of sleep a college student get influences their productivity level.

## Discussion

The statistical analysis above set out to test the relationship between weekday average hours of sleep and productivity level in college students. Our analysis showed that there is statistically significant evidence that the amount of sleep a college student gets influences their productivity level, which answers our original research question. Our population of interest was all college students, but our sample is not accurately representative of the population of interest. Our data includes observations from students at multiple colleges, but which colleges we received data from is based on convenience, instead of any sort of randomized process. Thus, our results cannot be generalized to the entire population of interest. 

Data was self-reported and was collected from college students using convenience sampling with a Google Form. We reached out to our peers who are also in college, and received responses from Smithies, as well as many individuals who attend colleges other than Smith. To assure consistency and ease of data analysis, the questions on the Google Form were answerable only by multiple choice options. There were three options for average amount of sleep on weekdays, dividing observations into: less than 5 hours, 5-7 hours, and more than 7 hours. This converted the data for hours, which are typically continuous numerical values, into a categorical variable. Survey participants indicated their self-evaluated productivity as “not productive”, “somewhat productive”, or “very productive”. This resulted in a categorical and ordinal variable for the data regarding productivity. @fig-sleep and @fig-productivity show the proportions of survey respondents that indicated themselves as falling within our three divisions of hours of sleep and productivity, respectively. @tbl-sleep-productivity and @fig-sleep-productivity summarize the distribution of both of our variables, displaying the counts of observations grouped by both hours of sleep and productivity. We determined that the appropriate statistical analysis to use in this context given that both of our variables are categorical is the Two-Way Table Test of Independence using a mathematical model. 

A major limitation of our analysis is that it was conducted despite the data meeting neither the Independence nor the Large Sample conditions for our chosen hypothesis test. The Independence condition cannot be met given that we did not collect data using a random sample. The Large Sample condition requires that the expected counts for all cells in our contingency table are greater than 5. Expected count is a measure of the total for the row in which a given value is found multiplied by the column total for the same value, divided by the table total. As indicated in @tbl-sleep-productivity-expected, two out of nine cells do not meet the Large Sample condition; the expected counts for these two cells is less than 5. 

We conducted our analysis under the assumption that the conditions described above were met. The analysis concluded that the self-reported productivity level of college students varies based on the average amount of sleep they get during weekday.  

Although our results can not be generalized to the population of interest, they are congruent with published research on similar topics. For example, @preetha2020knowledge is an analysis of levels of awareness among dental students that getting insufficient sleep is detrimental to productivity. Similarly to our study, the data were collected by distributing online surveys. The study found that 74% of surveyed individuals are aware that inadequate sleep causes stress, and the same percentage responded that they were aware that insufficient sleep causes degeneration of cognitive functions. 77% of participants claimed to be aware that insufficient sleep can trigger irritability. The study’s results include further analyses of dental student’s knowledge of the negative effects of sleep deprivation, the ones most pertinent to the research we conducted are included here. Based on these results and parameters of @preetha2020knowledge, it seems probable that our result reflects a real correlation between shorter sleep duration and lower overall productivity level in college students. 

This is reaffirmed by the results of another related analysis of medical students in @hassan2023relationship. Variables collected include sleep quality, as measured by the Pittsburgh Sleep Quality Index, levels of depression and anxiety, as scored on the Hamilton Depression (or Anxiety) Rating Scales, respectively, and academic performance scores. @hassan2023relationship concluded that poor sleep quality is correlated with higher levels of depression and anxiety, which in turn correlates negatively with academic performance. Once again, the published literature reaffirms our finding that getting less sleep diminishes a student’s ability to perform productively.

Many other analyses could be conducted with the data we gathered using this form. These other variables dictate the most feasible and convenient possible future extensions to this research project. Our Google Form collected a total of six variables, only two of which were used for the statistical analysis conducted above. The variables we did not use include class year, major division, whether the respondent considers themselves an early bird or a night owl, and stress level (as a categorical variable formulated similarly to those used in the analysis carried out above). Based on these variables, we could consider examining whether stress (or productivity) levels vary based on major division or class year. We could also evaluate whether being an early bird or a night owl is correlated with higher or lower stress or productivity levels. Beyond the scope of the dataset we have collected, we could consider using random sampling to select colleges throughout the world from which to collect data, and then randomly sample students enrolled there in order to compile a larger and more robust data set. Statistical analyses of this dataset would yield results generalizable to the entire target population of college students.

## Bibliography
